import {
  Fn,
  convertToTexture,
  cos,
  nodeObject,
  sin,
  uniform,
  uv,
  vec2,
  vec4
} from "./chunk-KPFVNXSK.js";
import {
  TempNode
} from "./chunk-IDAOASVO.js";
import "./chunk-XFHY3IS3.js";

// node_modules/three/examples/jsm/tsl/display/RGBShiftNode.js
var RGBShiftNode = class extends TempNode {
  static get type() {
    return "RGBShiftNode";
  }
  /**
   * Constructs a new RGB shift node.
   *
   * @param {TextureNode} textureNode - The texture node that represents the input of the effect.
   * @param {number} [amount=0.005] - The amount of the RGB shift.
   * @param {number} [angle=0] - Defines the orientation in which colors are shifted.
   */
  constructor(textureNode, amount = 5e-3, angle = 0) {
    super("vec4");
    this.textureNode = textureNode;
    this.amount = uniform(amount);
    this.angle = uniform(angle);
  }
  /**
   * This method is used to setup the effect's TSL code.
   *
   * @param {NodeBuilder} builder - The current node builder.
   * @return {ShaderCallNodeInternal}
   */
  setup() {
    const { textureNode } = this;
    const uvNode = textureNode.uvNode || uv();
    const sampleTexture = (uv2) => textureNode.sample(uv2);
    const rgbShift2 = Fn(() => {
      const offset = vec2(cos(this.angle), sin(this.angle)).mul(this.amount);
      const cr = sampleTexture(uvNode.add(offset));
      const cga = sampleTexture(uvNode);
      const cb = sampleTexture(uvNode.sub(offset));
      return vec4(cr.r, cga.g, cb.b, cga.a);
    });
    return rgbShift2();
  }
};
var RGBShiftNode_default = RGBShiftNode;
var rgbShift = (node, amount, angle) => nodeObject(new RGBShiftNode(convertToTexture(node), amount, angle));
export {
  RGBShiftNode_default as default,
  rgbShift
};
//# sourceMappingURL=three_addons_tsl_display_RGBShiftNode__js.js.map
